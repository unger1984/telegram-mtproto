{"version":3,"sources":["../../../src/service/main/wrap.js"],"names":["MTProto","config","mtproto","api","telegram","method","params","options","mtpInvokeApi","on","emit","storage","uid","bus","future","futureRequest"],"mappings":";;;;;kBAYwBA,O;;AAVxB;;AACA;;AAEA;;;;AAEA;;AACA;;AAEA;;;;AAEe,SAASA,OAAT,CAAiBC,SAAqB,EAAtC,EAA8D;AAC3E,MAAMC,UAAU,oBAASD,MAAT,CAAhB;;AAEA,MAAME,MAAMD,QAAQC,GAApB;;AAEA,WAASC,QAAT,CAAkBC,MAAlB,EACkBC,MADlB,EAEkBC,UAAuB,EAFzC,EAE6C;AAC3C,WAAOJ,IAAIK,YAAJ,CAAiBH,MAAjB,EAAyBC,MAAzB,EAAiCC,OAAjC,CAAP;AACD;;AAMDH,WAASK,EAAT,GAAcN,IAAIM,EAAlB;AACAL,WAASM,IAAT,GAAgBP,IAAIO,IAApB;AACAN,WAASO,OAAT,GAAmBR,IAAIQ,OAAvB;AACAP,WAASQ,GAAT,GAAeV,QAAQU,GAAvB;AACAR,WAASS,GAAT,GAAeX,QAAQW,GAAvB;AACAT,WAASF,OAAT,GAAmBA,OAAnB;AACAE,WAASU,MAAT,GAVA,SAASC,aAAT,CAAuBV,MAAvB,EAAuCC,SAAiB,EAAxD,EAAwF;AACtF,WAAO,uBAASH,IAAIK,YAAb,EAA2BH,MAA3B,EAAmCC,MAAnC,CAAP;AACD,GAQD;;AAGA,SAAOF,QAAP;AACD","file":"wrap.js","sourcesContent":["//@flow\n\nimport { encaseP2, Fluture } from 'fluture'\nimport { MTError } from '../../error'\n\nimport Main from './index'\n\nimport { type ConfigType } from './index.h'\nimport { type ApiManagerInstance, type LeftOptions } from '../api-manager/index.h'\n\nimport { type Response } from 'Newtype'\n\nexport default function MTProto(config: ConfigType = {}): ApiManagerInstance {\n  const mtproto = new Main(config)\n\n  const api = mtproto.api\n\n  function telegram(method: string,\n                    params: Object,\n                    options: LeftOptions = {}) {\n    return api.mtpInvokeApi(method, params, options)\n  }\n\n  function futureRequest(method: string, params: Object = {}): Fluture<Response, MTError> {\n    return encaseP2(api.mtpInvokeApi, method, params)\n  }\n\n  telegram.on = api.on\n  telegram.emit = api.emit\n  telegram.storage = api.storage\n  telegram.uid = mtproto.uid\n  telegram.bus = mtproto.bus\n  telegram.mtproto = mtproto\n  telegram.future = futureRequest\n  if (__DEV__)\n    telegram.api = api\n  return telegram\n}\n"]}