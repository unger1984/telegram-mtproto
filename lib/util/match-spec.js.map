{"version":3,"sources":["../../src/util/match-spec.js"],"names":["guard","makeValidator","value","currentPath","e","selectCase","processSpec","processPair","fieldPath","key","spec","processing","withEmptyPath"],"mappings":";;;;;kBAuBwBA,K;;AApBxB;;AAGA,IAAMC,gBAAgBC,SAAUC,WAAD,IAA2B,iBAAK,iBAAK,qBAASA,WAAT,CAAL,CAAL,EAAkCC,KAAKA,MAAMF,KAA7C,CAA1D;;AAEA,IAAMG,aAAaH,SAAS,OAAOA,KAAP,KAAiB,QAAjB,GACxBI,YAAYJ,KAAZ,CADwB,GAExBD,cAAcC,KAAd,CAFJ;;AAIA;AACA,IAAMK,cAAeC,SAAD,IAAyB,CAAC,CAACC,GAAD,EAAMP,KAAN,CAAD,KAAkBG,WAAWH,KAAX,EAAkB,mBAAQO,GAAR,EAAaD,SAAb,CAAlB,CAA/D;;AAEA,IAAMF,cAAeI,IAAD,IAAmBF,SAAD,IAAyB,kBAAMD,YAAYC,SAAZ,CAAN,EAA8B,oBAAQE,IAAR,CAA9B,CAA/D;;AAEA;;;;;;AAMe,SAASV,KAAT,CAAeU,IAAf,EAAkD;AAC/D,MAAMC,aAAaL,YAAYI,IAAZ,CAAnB;AACA,MAAME,gBAAgBD,WAAW,EAAX,CAAtB;AACA;AACA,SAAO,oBAAQC,aAAR,CAAP;AACD","file":"match-spec.js","sourcesContent":["//@flow\n\n\nimport { append, toPairs, chain, allPass, pipe, view, lensPath } from 'ramda'\n\n\nconst makeValidator = value => (currentPath: string[]) => pipe(view(lensPath(currentPath)), e => e === value)\n\nconst selectCase = value => typeof value === 'object'\n  ? processSpec(value)\n  : makeValidator(value)\n\n//$off\nconst processPair = (fieldPath: string[]) => ([key, value]) => selectCase(value)(append( key, fieldPath ))\n\nconst processSpec = (spec: Object) => (fieldPath: string[]) => chain(processPair(fieldPath), toPairs(spec))\n\n/**\n * Validate object by given pattern\n *\n * @param {Object} spec\n * @returns {(x: any) => boolean}\n */\nexport default function guard(spec: Object): (x: any) => boolean {\n  const processing = processSpec(spec)\n  const withEmptyPath = processing([])\n  //$off\n  return allPass(withEmptyPath)\n}\n"]}